<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="icon.jpg" type="image/x-icon"> 
    <link rel="shortcut icon" href="icon.jpg" type="image/x-icon"> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="map.css">
    <link rel="stylesheet" href="darkmode.css">
    <title>AQI Index Monitor</title><script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,hi,bn,te,ta,ml,pa,mr,gu,ur,kn,or,as,ma,ne,sid,bo,sa,ckb,km,guw,mlt,sd,si',
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <header>
        <div class="company-info">
            <img src="logo.jpg" alt="VAYU Logo" class="company-logo"> <!-- Added company logo -->
            <div class="company-details">
                <span class="company-name">VAYU</span>
                <span class="slogan">BUILD TO BREATH CLEAN</span>
            </div>
        </div>
        <div id="google_translate_element" class="translation-container"></div>
        <div class="font-size-buttons">
            <button onclick="setFontSize('small')" class="font-size-button">A-</button>
            <button onclick="setFontSize('normal')" class="font-size-button">A</button>
            <button onclick="setFontSize('large')" class="font-size-button">A+</button>
        </div>
    </header>
    <nav>
        <div class="nav-content">
            <div class="box box1"><a href="index.html">Home</a></div>
            <div class="box box2"><a href="map.html">Map</a></div>
        </div>
    </nav>

    <main>
        <div>
            <input id="search-input" type="text" placeholder="Search bus stops" />
            <ul id="search-results" style="display: none;"></ul>
        </div>
        
        <div id="chart-container" style="display: none; width: 400px; height: 400px; position:fixed right:0px;  ">
            <div class="aqi"></div>
            <canvas id="aqi-chart"></canvas>
            <a href="algorithm.html">Prediction</a>
        </div>
        
        <div id="map" class="map" style="height: 500px;"></div>
    </main>
    <footer>
        <div class="footer-content">
            <p>&copy; 2024 AQI Index Monitor. All rights reserved.</p>
        </div>
    </footer>
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    <script src="bus.js"></script>
    <script src="darkmode.js"></script>
    <script>
    
function showAQIGraph(stopName) {
    const stop = busStops.find(s => s.name === stopName);
    if (!stop || !stop.historicalData) {
        alert("No historical data available.");
        return;
    }

    const chartContainer = document.getElementById('chart-container');
    const ctx = document.getElementById('aqi-chart').getContext('2d');

    // Display the chart container
    chartContainer.style.display = 'block';

    // Destroy any existing chart instance
    if (window.aqiChart) {
        window.aqiChart.destroy();
    }

    // Create a new chart
    window.aqiChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5'], // Example labels
            datasets: [{
                label: `AQI for ${stop.name}`,
                data: stop.historicalData,
                borderColor: 'rgba(75, 192, 192, 1)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                fill: true,
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: true },
                tooltip: { enabled: true },
            },
            scales: {
                x: { title: { display: true, text: 'Days' } },
                y: { title: { display: true, text: 'AQI Value' } }
            }
        }
    });
}

// Reset the search box when clicking outside
document.addEventListener('click', event => {
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
        searchInput.value = ''; // Clear search box
        searchResults.innerHTML = ''; // Clear results
        searchResults.style.display = 'none'; // Hide search results
    }
});

// Trigger the search function on keyup
document.getElementById('search-input').addEventListener('keyup', searchItems);

// Initialize search results on page load (optional)
document.addEventListener('DOMContentLoaded', searchItems);


    </script>    
</body>
</html>
